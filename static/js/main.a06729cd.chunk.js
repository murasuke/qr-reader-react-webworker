(this["webpackJsonpqr-reader-react"]=this["webpackJsonpqr-reader-react"]||[]).push([[0],{16:function(t,e,n){var r,a=n(31).wrap,i=n(25);t.exports=function t(){return this instanceof t?a(i()):r||(r=a(i()))}},25:function(t,e,n){t.exports=function(){return new Worker(n.p+"f61a5d3cf1c50133bc32.worker.js")}},32:function(t,e,n){"use strict";n.r(e);var r,a,i,c,o,u,s=n(0),b=n.n(s),h=n(14),d=n.n(h),l=n(2),p=n(3),f=n(10),j=n.n(f),O=n(15),g=n(4),x=n(5),v=n(16),w=n.n(v).a,m=n(1),R=x.a.div(r||(r=Object(g.a)(["\n  position: relative;\n  width: ","px;\n  height: ","px;\n"])),(function(t){return t.width}),(function(t){return t.height})),A=x.a.video(a||(a=Object(g.a)(["\n  position: absolute;\n  z-index: -100;\n"]))),y=x.a.div(i||(i=Object(g.a)(["\n  position: absolute;\n  top: ","px;\n  left: ","px;\n  width: ","px;\n  height: ","px;\n  border: 1px solid #f00;\n"])),(function(t){return t.top}),(function(t){return t.left}),(function(t){return t.width}),(function(t){return t.height})),k=x.a.div(c||(c=Object(g.a)(["\n  position: absolute;\n  box-sizing: border-box;\n  width: ","px;\n  height: ","px;\n  border-top: ","px solid rgb(0, 0, 0, 0.3);\n  border-right: ","px solid rgb(0, 0, 0, 0.3);\n  border-bottom: ","px solid rgb(0, 0, 0, 0.3);\n  border-left: ","px solid rgb(0, 0, 0, 0.3);\n"])),(function(t){return t.width}),(function(t){return t.height}),(function(t){return t.height*((100-t.scanAreaRatio)/2)/100}),(function(t){return t.width*((100-t.scanAreaRatio)/2)/100}),(function(t){return t.height*((100-t.scanAreaRatio)/2)/100}),(function(t){return t.width*((100-t.scanAreaRatio)/2)/100})),C=x.a.div(u||(u=Object(g.a)(["\n  position: absolute;\n  left: ","%;\n  width: ","%;\n  border-bottom: 3px solid #0f0;\n  animation: "," infinite 1300ms alternate both ease-in-out ",";\n"])),(function(t){return(100-t.scanAreaRatio)/2}),(function(t){return t.scanAreaRatio}),(function(t){return e=t.scanAreaRatio,Object(x.b)(o||(o=Object(g.a)(["\n  from {\n    height: ","%;\n  }\n\n  to {\n    height: ","%;\n  }\n"])),(100-e)/2,e+(100-e)/2);var e}),(function(t){return t.state})),I=function(t){var e=Object(s.useState)({top:0,left:0,width:0,height:0}),n=Object(p.a)(e,2),r=n[0],a=n[1],i=Object(s.useRef)(null),c=Object(s.useRef)(null),o=Object(s.useMemo)((function(){return new w}),[]),u=function(t,e,n){var r,i;a({top:null!==(r=(t.y<e.y?t.y:e.y)+n.top)&&void 0!==r?r:0,left:null!==(i=(t.x<e.x?t.x:e.x)+n.left)&&void 0!==i?i:0,width:Math.abs(e.x-t.x),height:Math.abs(e.y-t.y)})};return Object(s.useEffect)((function(){Object(O.a)(j.a.mark((function e(){var n,r,a,s,b,h,d,l,p;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.pause){e.next=5;break}return i.current.pause(),clearInterval(c.current),c.current=null,e.abrupt("return");case 5:return n=t.width,r=t.height,a={audio:!1,video:{facingMode:"environment",width:n,height:r}},e.next=9,navigator.mediaDevices.getUserMedia(a);case 9:return s=e.sent,i.current.srcObject=s,i.current.setAttribute("autoplay",""),i.current.setAttribute("muted",""),i.current.setAttribute("playsinline",""),i.current.play(),b=new OffscreenCanvas(n,r),h=b.getContext("2d"),d=(100-t.scanAreaRatio)/2/100,l=t.scanAreaRatio/100,p={top:r*d,left:n*d,width:n*l,height:r*l},c.current||(c.current=setInterval((function(){h.drawImage(i.current,p.left,p.top,p.width,p.height,0,0,p.width,p.height);var e=h.getImageData(0,0,p.width,p.height);o.processData(e).then((function(e){e&&(console.log(e.data),t.showQRFrame&&u(e.location.topLeftCorner,e.location.bottomRightCorner,p),t.gecognizeCallback&&t.gecognizeCallback(e))}))}),t.timerInterval)),e.abrupt("return",(function(){return clearInterval(c.current)}));case 22:case"end":return e.stop()}}),e)})))()}),[t]),Object(m.jsxs)(R,Object(l.a)(Object(l.a)({},t),{},{children:[Object(m.jsx)(A,{ref:i}),Object(m.jsx)(y,Object(l.a)({},r)),Object(m.jsx)(k,Object(l.a)({},t)),Object(m.jsx)(C,Object(l.a)({},Object(l.a)({state:t.pause?"paused":"running"},t)))]}))};I.defaultProps={width:500,height:500,pause:!1,showQRFrame:!0,timerInterval:300,scanAreaRatio:70};var S=I,M=function(){var t=b.a.useState(!0),e=Object(p.a)(t,2),n=e[0],r=e[1],a=Object(s.useState)({width:500,height:500,pause:!0}),i=Object(p.a)(a,2),c=i[0],o=i[1],u=Object(s.useState)(""),h=Object(p.a)(u,2),d=h[0],f=h[1];return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(S,Object(l.a)(Object(l.a)({},c),{},{gecognizeCallback:function(t){f(t.data),n&&o((function(t){return Object(l.a)(Object(l.a)({},t),{},{pause:!0})}))}})),Object(m.jsxs)("div",{children:[Object(m.jsxs)("label",{htmlFor:"rdoStop",children:[Object(m.jsx)("input",{id:"rdoStop",type:"radio",name:"rdo",value:"0",onChange:function(t){return r("0"===t.target.value)},checked:n}),"\u8a8d\u8b58\u6642\u306b\u81ea\u52d5\u505c\u6b62"]}),Object(m.jsxs)("label",{htmlFor:"rdoContinue",children:[Object(m.jsx)("input",{id:"rdoContinue",type:"radio",name:"rdo",value:"1",onChange:function(t){return r("0"===t.target.value)},checked:!n}),"\u8a8d\u8b58\u6642\u3082\u51e6\u7406\u7d99\u7d9a"]}),Object(m.jsx)("button",{type:"button",onClick:function(){o((function(t){return Object(l.a)(Object(l.a)({},t),{},{pause:!t.pause})}))},children:c.pause?"\u518d\u958b":"\u505c\u6b62"}),Object(m.jsxs)("p",{children:["QR\u30b3\u30fc\u30c9\uff1a",d]})]})]})};d.a.render(Object(m.jsx)(b.a.StrictMode,{children:Object(m.jsx)(M,{})}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.a06729cd.chunk.js.map