(this["webpackJsonpqr-reader-react"]=this["webpackJsonpqr-reader-react"]||[]).push([[0],{16:function(t,e,n){var r,a=n(31).wrap,i=n(25);t.exports=function t(){return this instanceof t?a(i()):r||(r=a(i()))}},25:function(t,e,n){t.exports=function(){return new Worker(n.p+"07a4d927844014e176ef.worker.js")}},32:function(t,e,n){"use strict";n.r(e);var r,a,i,c,o,u,s=n(0),h=n.n(s),b=n(14),d=n.n(b),l=n(2),j=n(3),f=n(10),p=n.n(f),O=n(15),g=n(4),x=n(5),v=n(16),w=n.n(v).a,m=n(1),R=x.a.div(r||(r=Object(g.a)(["\n  position: relative;\n  width : ","px;\n  height: ","px;\n"])),(function(t){return t.width}),(function(t){return t.height})),k=x.a.video(a||(a=Object(g.a)(["\n  position: absolute; \n  z-index : -100;\n"]))),A=x.a.div(i||(i=Object(g.a)(["\n  position: absolute; \n  border: 1px solid #F00;\n  top   : ","px;\n  left  : ","px;\n  width : ","px;\n  height: ","px;\n"])),(function(t){return t.top}),(function(t){return t.left}),(function(t){return t.width}),(function(t){return t.height})),y=x.a.div(c||(c=Object(g.a)(["\n  position absolute;\n  box-sizing: border-box;\n  height:  ","px;\n  width :  ","px;\n  border-left:   ","px solid rgb(0,0,0,0.3);\n  border-right:  ","px solid rgb(0,0,0,0.3);\n  border-top:    ","px solid rgb(0,0,0,0.3);\n  border-bottom: ","px solid rgb(0,0,0,0.3);\n"])),(function(t){return t.height}),(function(t){return t.width}),(function(t){return t.width*((100-t.scanAreaRatio)/2)/100}),(function(t){return t.width*((100-t.scanAreaRatio)/2)/100}),(function(t){return t.height*((100-t.scanAreaRatio)/2)/100}),(function(t){return t.height*((100-t.scanAreaRatio)/2)/100})),C=x.a.div(u||(u=Object(g.a)(["\n  position absolute;\n  animation: "," infinite  1300ms alternate both ease-in-out ",";\n  border-bottom: 3px solid #0F0;\n  left: ","%;\n  width : ","%;\n"])),(function(t){return e=t.scanAreaRatio,Object(x.b)(o||(o=Object(g.a)(["\n  from {\n    height: ","%;\n  }\n  to {\n    height: ","%;\n  }\n"])),(100-e)/2,e+(100-e)/2);var e}),(function(t){return t.state}),(function(t){return(100-t.scanAreaRatio)/2}),(function(t){return t.scanAreaRatio})),I=function(t){var e=Object(s.useState)({top:0,left:0,width:0,height:0}),n=Object(j.a)(e,2),r=n[0],a=n[1],i=Object(s.useRef)(null),c=Object(s.useRef)(null),o=Object(s.useMemo)((function(){return new w}),[]),u=function(t,e,n){var r,i;a({top:null!==(r=(t.y<e.y?t.y:e.y)+n.top)&&void 0!==r?r:0,left:null!==(i=(t.x<e.x?t.x:e.x)+n.left)&&void 0!==i?i:0,width:Math.abs(e.x-t.x),height:Math.abs(e.y-t.y)})};return Object(s.useEffect)((function(){Object(O.a)(p.a.mark((function e(){var n,r,a,s,h,b,d,l,j;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.pause){e.next=5;break}return i.current.pause(),clearInterval(c.current),c.current=null,e.abrupt("return");case 5:return n=t.width,r=t.height,a={audio:!1,video:{facingMode:"environment",width:n,height:r}},e.next=9,navigator.mediaDevices.getUserMedia(a);case 9:return s=e.sent,i.current.srcObject=s,i.current.play(),h=new OffscreenCanvas(n,r),b=h.getContext("2d"),d=(100-t.scanAreaRatio)/2/100,l=t.scanAreaRatio/100,j={top:r*d,left:n*d,width:n*l,height:r*l},c.current||(c.current=setInterval((function(){b.drawImage(i.current,j.left,j.top,j.width,j.height,0,0,j.width,j.height);var e=b.getImageData(0,0,j.width,j.height);o.processData(e).then((function(e){e&&(console.log(e.data),t.showQRFrame&&u(e.location.topLeftCorner,e.location.bottomRightCorner,j),t.gecognizeCallback&&t.gecognizeCallback(e))}))}),t.timerInterval)),e.abrupt("return",(function(){return clearInterval(c.current)}));case 19:case"end":return e.stop()}}),e)})))()}),[t]),Object(m.jsxs)(R,Object(l.a)(Object(l.a)({},t),{},{children:[Object(m.jsx)(k,{ref:i}),Object(m.jsx)(A,Object(l.a)({},r)),Object(m.jsx)(y,Object(l.a)({},t)),Object(m.jsx)(C,Object(l.a)({},Object(l.a)({state:t.pause?"paused":"running"},t)))]}))};I.defaultProps={width:500,height:500,pause:!1,showQRFrame:!0,timerInterval:300,scanAreaRatio:70};var M=I;var z=function(){var t=h.a.useState(!0),e=Object(j.a)(t,2),n=e[0],r=e[1],a=Object(s.useState)({width:500,height:500,pause:!0}),i=Object(j.a)(a,2),c=i[0],o=i[1],u=Object(s.useState)(""),b=Object(j.a)(u,2),d=b[0],f=b[1];return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(M,Object(l.a)(Object(l.a)({},c),{},{gecognizeCallback:function(t){f(t.data),n&&o((function(t){return Object(l.a)(Object(l.a)({},t),{},{pause:!0})}))}})),Object(m.jsxs)("div",{children:[Object(m.jsxs)("label",{children:[Object(m.jsx)("input",{type:"radio",name:"rdo",value:"0",onChange:function(t){return r("0"===t.target.value)},checked:n}),"\u8a8d\u8b58\u6642\u306b\u81ea\u52d5\u505c\u6b62"]}),Object(m.jsxs)("label",{children:[Object(m.jsx)("input",{type:"radio",name:"rdo",value:"1",onChange:function(t){return r("0"===t.target.value)},checked:!n}),"\u8a8d\u8b58\u6642\u3082\u51e6\u7406\u7d99\u7d9a"]}),Object(m.jsx)("button",{onClick:function(){o((function(t){return Object(l.a)(Object(l.a)({},t),{},{pause:!t.pause})}))},children:c.pause?"\u518d\u958b":"\u505c\u6b62"}),Object(m.jsxs)("p",{children:["QR\u30b3\u30fc\u30c9\uff1a",d]})]})]})};d.a.render(Object(m.jsx)(h.a.StrictMode,{children:Object(m.jsx)(z,{})}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.8570df98.chunk.js.map